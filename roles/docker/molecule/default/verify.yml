---
- name: Verify
  hosts: all
  gather_facts: true
  tasks:
    - name: Check Docker is installed
      ansible.builtin.command: docker --version
      register: docker_version
      changed_when: false
      failed_when: docker_version.rc != 0

    - name: Check Docker Compose is available
      ansible.builtin.command: docker compose version
      register: compose_version
      changed_when: false
      failed_when: compose_version.rc != 0

    - name: Verify Docker daemon config exists
      ansible.builtin.stat:
        path: /etc/docker/daemon.json
      register: daemon_json
      failed_when: not daemon_json.stat.exists
