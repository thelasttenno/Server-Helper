# {{ ansible_managed }}
# Netdata streaming configuration â€” {{ netdata_mode }} mode

{% if netdata_mode == 'child' %}
[stream]
    enabled = yes
    destination = {{ target_control_ip }}:19999
    api key = {{ vault_netdata_stream_api_key }}
    timeout seconds = 60
    buffer size bytes = 1048576
    reconnect delay seconds = 5
{% endif %}

{% if netdata_mode == 'parent' %}
[{{ vault_netdata_stream_api_key }}]
    enabled = yes
    default history = {{ control_netdata.history_seconds }}
    default memory mode = dbengine
    health enabled by default = auto
    allow from = *
{% endif %}
