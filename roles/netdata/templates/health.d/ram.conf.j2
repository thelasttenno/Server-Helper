# Netdata RAM Usage Alarms
# Generated by Ansible - Server Helper v1.0.0

# RAM usage alarm
alarm: ram_usage_high
   on: system.ram
class: Utilization
 type: System
component: Memory
   os: linux
hosts: *
 calc: ($used - $cached - $buffers) * 100 / $used
units: %
every: 1m
 warn: $this > {{ netdata.alarms.ram_warning | default(80) }}
 crit: $this > {{ netdata.alarms.ram_critical | default(95) }}
delay: down 15m multiplier 1.5 max 1h
 info: percentage of RAM used (excluding cache and buffers)
   to: sysadmin

# Available RAM alarm
alarm: ram_available_low
   on: system.ram
class: Utilization
 type: System
component: Memory
   os: linux
hosts: *
 calc: ($avail) / 1024 / 1024
units: MB
every: 1m
 warn: $this < 200
 crit: $this < 100
delay: down 15m multiplier 1.5 max 1h
 info: available RAM is critically low
   to: sysadmin

# Swap usage alarm
alarm: swap_usage_high
   on: system.swap
class: Utilization
 type: System
component: Memory
   os: linux
hosts: *
 calc: $used * 100 / ($used + $free)
units: %
every: 1m
 warn: $this > 50
 crit: $this > 80
delay: down 15m multiplier 1.5 max 1h
 info: percentage of swap memory used - system may be running out of RAM
   to: sysadmin

# OOM killer alarm
alarm: oom_kill_detected
   on: mem.oom_kill
class: Errors
 type: System
component: Memory
   os: linux
hosts: *
lookup: sum -30m unaligned
 units: kills
every: 5m
 warn: $this > 0
delay: down 10m
 info: out-of-memory kills detected in the last 30 minutes
   to: sysadmin
