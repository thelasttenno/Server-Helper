# Netdata Disk Usage Alarms
# Generated by Ansible - Server Helper v1.0.0

# Disk space usage alarm
alarm: disk_space_usage
   on: disk.space
class: Utilization
 type: System
component: Disk
   os: linux
hosts: *
 calc: $used * 100 / ($avail + $used)
units: %
every: 1m
 warn: $this > {{ netdata.alarms.disk_warning | default(80) }}
 crit: $this > {{ netdata.alarms.disk_critical | default(90) }}
delay: up 1m down 15m multiplier 1.5 max 1h
 info: disk space usage is high
   to: sysadmin

# Disk space available alarm (absolute)
alarm: disk_space_available_low
   on: disk.space
class: Utilization
 type: System
component: Disk
   os: linux
hosts: *
 calc: $avail / 1024 / 1024
units: MB
every: 1m
 warn: $this < 1000
 crit: $this < 500
delay: up 1m down 15m multiplier 1.5 max 1h
 info: available disk space is critically low (less than 1GB)
   to: sysadmin

# Disk inode usage alarm
alarm: disk_inodes_usage
   on: disk.inodes
class: Utilization
 type: System
component: Disk
   os: linux
hosts: *
 calc: $used * 100 / ($avail + $used)
units: %
every: 1m
 warn: $this > 80
 crit: $this > 90
delay: up 1m down 15m multiplier 1.5 max 1h
 info: disk inode usage is high - too many files
   to: sysadmin

# Disk read latency alarm
alarm: disk_read_latency_high
   on: disk.await
class: Latency
 type: System
component: Disk
   os: linux
hosts: *
 calc: $reads
units: ms
every: 1m
 warn: $this > 50
 crit: $this > 100
delay: down 15m multiplier 1.5 max 1h
 info: average disk read latency is high
   to: sysadmin

# Disk write latency alarm
alarm: disk_write_latency_high
   on: disk.await
class: Latency
 type: System
component: Disk
   os: linux
hosts: *
 calc: $writes
units: ms
every: 1m
 warn: $this > 50
 crit: $this > 100
delay: down 15m multiplier 1.5 max 1h
 info: average disk write latency is high
   to: sysadmin

# Disk backlog alarm
alarm: disk_backlog_high
   on: disk.backlog
class: Latency
 type: System
component: Disk
   os: linux
hosts: *
lookup: average -10m unaligned of backlog
 units: ms
every: 1m
 warn: $this > 5000
 crit: $this > 10000
delay: down 15m multiplier 1.5 max 1h
 info: average disk backlog is high - I/O queue is building up
   to: sysadmin
