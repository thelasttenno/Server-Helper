# Netdata CPU Usage Alarms
# Generated by Ansible - Server Helper v1.0.0

# CPU usage alarm (10 minute average)
alarm: cpu_usage_high
   on: system.cpu
class: Utilization
 type: System
component: CPU
   os: linux
hosts: *
 calc: $system + $user + $nice + $iowait + $irq + $softirq + $steal
units: %
every: 1m
 warn: $this > {{ netdata.alarms.cpu_warning | default(80) }}
 crit: $this > {{ netdata.alarms.cpu_critical | default(95) }}
delay: down 15m multiplier 1.5 max 1h
 info: average CPU usage over the last 10 minutes
   to: sysadmin

# CPU usage alarm (1 minute average) - immediate response
alarm: cpu_usage_critical_immediate
   on: system.cpu
class: Utilization
 type: System
component: CPU
   os: linux
hosts: *
 calc: $system + $user + $nice + $iowait + $irq + $softirq + $steal
units: %
every: 10s
 crit: $this > {{ netdata.alarms.cpu_critical | default(95) }}
delay: down 5m multiplier 1.2 max 30m
 info: immediate CPU usage critical - averaging over 1 minute
   to: sysadmin

# CPU iowait alarm - disk bottleneck detection
alarm: cpu_iowait_high
   on: system.cpu
class: Latency
 type: System
component: CPU
   os: linux
hosts: *
 calc: $iowait
units: %
every: 1m
 warn: $this > 20
 crit: $this > 40
delay: down 15m multiplier 1.5 max 1h
 info: CPU time spent waiting for I/O operations - possible disk bottleneck
   to: sysadmin
