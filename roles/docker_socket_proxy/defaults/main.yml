---
# Docker Socket Proxy role defaults
# Provides secure remote Docker API access for control node

# Master toggle
docker_socket_proxy_enabled: true

# Skip actual Docker deployment (for molecule testing)
docker_socket_proxy_skip_deploy: false

# Container settings
docker_socket_proxy_container_name: "docker-socket-proxy"
docker_socket_proxy_image: "tecnativa/docker-socket-proxy"
docker_socket_proxy_image_tag: "latest"

# Stack directory (Dockge compatible)
docker_socket_proxy_stack_dir: "/opt/stacks/docker-socket-proxy"

# Network port (restricted to control node only)
docker_socket_proxy_port: 2375

# Control node IP (only this IP can access the proxy)
docker_socket_proxy_allowed_ip: "{{ control_node_ip }}"

# API permissions (read-only by default for security)
# Set to 1 to enable, 0 to disable
docker_socket_proxy_permissions:
  # Read-only operations
  CONTAINERS: 1
  IMAGES: 1
  NETWORKS: 1
  VOLUMES: 1
  INFO: 1
  VERSION: 1
  EVENTS: 1
  PING: 1
  # Write operations (disabled by default)
  POST: 0
  BUILD: 0
  COMMIT: 0
  CONFIGS: 0
  DISTRIBUTION: 0
  EXEC: 0
  GRPC: 0
  NODES: 0
  PLUGINS: 0
  SECRETS: 0
  SERVICES: 0
  SESSION: 0
  SWARM: 0
  SYSTEM: 0
  TASKS: 0

# Resource limits
docker_socket_proxy_memory_limit: "64m"
docker_socket_proxy_cpu_limit: "0.25"
