---
# Security role - SSH hardening, UFW, fail2ban, Lynis

- name: Display role info
  ansible.builtin.debug:
    msg: "Configuring security on {{ inventory_hostname }}"

# =============================================================================
# SSH HARDENING
# =============================================================================

- name: Configure SSH hardening
  ansible.builtin.include_tasks: ssh.yml
  when: security_ssh_enabled | bool

# =============================================================================
# UFW FIREWALL
# =============================================================================

- name: Configure UFW firewall
  ansible.builtin.include_tasks: ufw.yml
  when: security_ufw_enabled | bool

# =============================================================================
# FAIL2BAN
# =============================================================================

- name: Configure fail2ban
  ansible.builtin.include_tasks: fail2ban.yml
  when: security_fail2ban_enabled | bool

# =============================================================================
# LYNIS
# =============================================================================

- name: Configure Lynis security auditing
  ansible.builtin.include_tasks: lynis.yml
  when: security_lynis_enabled | bool
