---
# Common role defaults

# System settings
common_timezone: "{{ target_timezone | default('America/Vancouver') }}"
common_locale: "en_US.UTF-8"

# Base packages to install on all nodes
common_packages:
  - curl
  - wget
  - htop
  - vim
  - nano
  - git
  - jq
  - unzip
  - gnupg
  - ca-certificates
  - apt-transport-https
  - software-properties-common
  - python3
  - python3-pip
  - python3-apt
  - lsb-release
  - gdu
  - ncdu
  - tree
  - rsync
  - net-tools
  - dnsutils
  - iputils-ping
  - bc

# Chrony NTP configuration
common_chrony_enabled: true
common_chrony_servers:
  - "0.pool.ntp.org"
  - "1.pool.ntp.org"
  - "2.pool.ntp.org"
  - "3.pool.ntp.org"

# CPU microcode (auto-detected)
common_microcode_enabled: true

# Logrotate for Docker
common_docker_logrotate_enabled: true
common_docker_logrotate_size: "10M"
common_docker_logrotate_rotate: 5

# System tuning
common_sysctl_tuning: true
common_sysctl_settings:
  # Network performance
  net.core.rmem_max: 16777216
  net.core.wmem_max: 16777216
  net.ipv4.tcp_rmem: "4096 87380 16777216"
  net.ipv4.tcp_wmem: "4096 65536 16777216"
  # Security
  net.ipv4.conf.all.rp_filter: 1
  net.ipv4.conf.default.rp_filter: 1
  # File handles
  fs.file-max: 2097152
  # VM tuning
  vm.swappiness: 10
  vm.dirty_ratio: 60
  vm.dirty_background_ratio: 2
