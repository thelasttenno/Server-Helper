# Authentik Setup Guide

## Initial Access
- URL: `https://auth.{{ target_domain }}`
- Username: `akadmin`
- Password: (set in vault as `vault_authentik_credentials.bootstrap_password`)

## Post-Deployment Steps
1. Log in with bootstrap credentials above
2. **Change bootstrap password** immediately
3. Create OIDC Providers for services (Grafana, etc.)
4. Configure authentication flows as needed
5. Set up MFA for admin accounts

## Grafana OIDC Integration
1. In Authentik: Applications → Create → Provider → OAuth2/OIDC
2. Set redirect URI: `https://grafana.{{ target_domain }}/login/generic_oauth`
3. Note the Client ID and Client Secret
4. Update vault: `vault_grafana_oidc.client_id` and `vault_grafana_oidc.client_secret`
5. Re-run: `ansible-playbook playbooks/control.yml --tags grafana`
